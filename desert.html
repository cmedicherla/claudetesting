<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stroke Desert Map - USA</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f5f7;
        }

        .container {
            max-width: 100%;
            margin: 0;
            background: white;
        }

        header {
            background: #ffffff;
            color: #1d1d1f;
            padding: 40px 30px;
            text-align: center;
            border-bottom: 1px solid #e5e5e7;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 600;
            letter-spacing: -0.5px;
            color: #1d1d1f;
        }

        .subtitle {
            font-size: 1.1em;
            color: #6e6e73;
            font-weight: 400;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }

        .info-section {
            background: #fafafa;
            padding: 30px;
            text-align: center;
            border-bottom: 1px solid #e5e5e7;
        }

        .info-section p {
            color: #1d1d1f;
            font-size: 1em;
            max-width: 700px;
            margin: 0 auto 15px;
            line-height: 1.6;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            border: 1px solid #d2d2d7;
        }

        .covered {
            background: rgba(76, 175, 80, 0.15);
        }

        .desert {
            background: #e5e5e7;
        }

        .center-marker {
            background: #1d1d1f;
        }

        .controls {
            background: #fff;
            padding: 20px 30px;
            border-bottom: 1px solid #e5e5e7;
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .control-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95em;
        }

        .control-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .control-item label {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .color-indicator {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 1px solid #d2d2d7;
        }

        .csc-color {
            background: rgba(76, 175, 80, 0.6);
        }

        .tsc-color {
            background: rgba(33, 150, 243, 0.6);
        }

        .psc-color {
            background: rgba(255, 152, 0, 0.6);
        }

        #map {
            width: 100%;
            height: 700px;
            border: none;
        }

        .disclaimer {
            background: #fff;
            padding: 30px;
            text-align: center;
            color: #6e6e73;
            font-size: 0.9em;
            border-top: 1px solid #e5e5e7;
        }

        .disclaimer strong {
            color: #d1180b;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            #map {
                height: 500px;
            }

            .legend {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Stroke Desert Map</h1>
            <p class="subtitle">Geographic access to comprehensive stroke centers within the 1-hour golden window for stroke treatment</p>
        </header>

        <div class="info-section">
            <p>Geographic accessibility to certified stroke centers in the United States based on travel time windows for optimal stroke treatment.</p>
        </div>

        <div class="controls">
            <div class="control-item">
                <input type="checkbox" id="toggle-csc" checked onchange="toggleCenterType('csc')">
                <label for="toggle-csc">
                    <span class="color-indicator csc-color"></span>
                    Comprehensive (CSC) - 1 hour
                </label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="toggle-tsc" checked onchange="toggleCenterType('tsc')">
                <label for="toggle-tsc">
                    <span class="color-indicator tsc-color"></span>
                    Thrombectomy-Capable (TSC) - 45 min
                </label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="toggle-psc" checked onchange="toggleCenterType('psc')">
                <label for="toggle-psc">
                    <span class="color-indicator psc-color"></span>
                    Primary (PSC) - 30 min
                </label>
            </div>
        </div>

        <div id="map"></div>

        <div class="disclaimer">
            <strong>Important Notice</strong>
            <p>This map uses distance as a proxy for travel time. Comprehensive Stroke Centers (CSC): 60 miles ≈ 1 hour; Thrombectomy-Capable (TSC): 45 miles ≈ 45 min; Primary Stroke Centers (PSC): 30 miles ≈ 30 min. Actual travel times may vary based on road conditions, terrain, and traffic. This visualization is for informational purposes only.</p>
            <p style="margin-top: 10px;"><strong>Data Note:</strong> Thrombectomy-capable hospital data (47 centers across 31 states) compiled from Joint Commission certifications, state health departments, hospital websites, and verified thrombectomy capabilities. Includes both formally certified TSCs and hospitals with documented mechanical thrombectomy services. PSC data is sample only (3 centers). Additional thrombectomy-capable and primary stroke centers exist nationwide. For comprehensive data, consult Joint Commission Quality Check, DNV, ACHC, and state health departments.</p>
            <p style="margin-top: 10px;"><strong style="color: #d1180b; display: inline;">Always call 911 in case of a stroke emergency.</strong></p>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="desert.js"></script>
</body>
</html>
